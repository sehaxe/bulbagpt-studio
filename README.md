# üáßüáæ BulbaGPT Studio: Scientific AI Foundry

**BulbaGPT Studio** ‚Äî —ç—Ç–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è –∏–Ω–∂–µ–Ω–µ—Ä–Ω–∞—è —Å—Ä–µ–¥–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, –æ–±—É—á–µ–Ω–∏—è –∏ —ç–∫—Å–ø–æ—Ä—Ç–∞ –º–∞–ª—ã—Ö —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π (SLM) —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π **Llama-3 (GQA)**, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –¥–ª—è **—Å–ª–∞–≤—è–Ω—Å–∫–∏—Ö —è–∑—ã–∫–æ–≤ (RU/BY)**.

–ú—ã –æ—Ç–∫–∞–∑–∞–ª–∏—Å—å –æ—Ç `HuggingFace Trainer` –∏ –ø–µ—Ä–µ–ø–∏—Å–∞–ª–∏ —è–¥—Ä–æ –Ω–∞ **Rust**, —á—Ç–æ–±—ã —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –±—É—Ç—ã–ª–æ—á–Ω—ã–µ –≥–æ—Ä–ª—ã—à–∫–∏ –≤ –ø–∞–º—è—Ç–∏ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ (IO).

> *"–≠—Ç–æ –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–∫—Ä–∏–ø—Ç –æ–±—É—á–µ–Ω–∏—è. –≠—Ç–æ –∫–æ–º–±–∞–π–Ω, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–∂–∏–º–∞–µ—Ç 100% FLOPS –∏–∑ –≤–∞—à–µ–π GPU –∏ —Å–æ–∑–¥–∞–µ—Ç –º–æ–¥–µ–ª–∏, –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤—ã–µ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É –≤ —ç–∫–æ—Å–∏—Å—Ç–µ–º–µ llama.cpp."*

---

## üß¨ –ì–ª–∞–≤–Ω—ã–µ –∏–Ω–Ω–æ–≤–∞—Ü–∏–∏

### 1. Slavic-Aware Llama 3 Architecture
–ú—ã –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–ª–∏ —Ç–æ–ø–æ–ª–æ–≥–∏—é Llama 3 –ø–æ–¥ —Å–ø–µ—Ü–∏—Ñ–∏–∫—É –∫–∏—Ä–∏–ª–ª–∏—Ü—ã –∏ –º–∞–ª—ã–µ —Ä–∞–∑–º–µ—Ä—ã (Nano-LLM):
*   **True Llama-3 Tokenizer:** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π Regex-–ø–∞—Ä—Å–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π **Unicode Normalization (NFC)**. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è –±–µ–ª–æ—Ä—É—Å—Å–∫–æ–≥–æ (`—û`, `—ñ`) –∏ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤ ‚Äî —Å–ª–æ–≤–∞ –Ω–µ –¥—Ä–æ–±—è—Ç—Å—è –Ω–∞ –º—É—Å–æ—Ä–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã, –∫–æ–Ω—Ç–µ–∫—Å—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —Ü–µ–ª—å–Ω—ã–º.
*   **Exact Dimension Match:** –ú–∞—Ç—Ä–∏—Ü—ã –º–æ–¥–µ–ª–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è —Å—Ç—Ä–æ–≥–æ –ø–æ–¥ —Ä–∞–∑–º–µ—Ä —Å–ª–æ–≤–∞—Ä—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, 32003 —Ç–æ–∫–µ–Ω–∞). –ù–∏–∫–∞–∫–æ–≥–æ –ª–∏—à–Ω–µ–≥–æ –ø–∞–¥–¥–∏–Ω–≥–∞ ‚Äî —ç—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç **–±–∏—Ç-–≤-–±–∏—Ç —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å LM Studio –∏ Oobabooga.
*   **Grouped Query Attention (GQA):** –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –≥–æ–ª–æ–≤ 1:3 –∏–ª–∏ 1:4. –°–Ω–∏–∂–∞–µ—Ç –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ KV-–∫—ç—à–∞ –∏ —É—Å–∫–æ—Ä—è–µ—Ç –∏–Ω—Ñ–µ—Ä–µ–Ω—Å –Ω–∞ CPU.

### 2. –†–µ–∂–∏–º "BOTH": –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
–°—Ç—É–¥–∏—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–∏–±—Ä–∏–¥–Ω—ã–π —Ä–µ–∂–∏–º –∫–æ–º–ø–∏–ª—è—Ü–∏–∏:
*   ‚úÖ **Flash Attention 2:** –†–∞–±–æ—Ç–∞ —Å –ø–∞–º—è—Ç—å—é GPU —á–µ—Ä–µ–∑ SRAM (–ª–∏–Ω–µ–π–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å O(N)).
*   ‚úÖ **Torch Compile (Inductor):** –°–ø–ª–∞–≤–ª–µ–Ω–∏–µ CUDA-—è–¥–µ—Ä (Kernel Fusion) –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –æ–≤–µ—Ä—Ö–µ–¥–∞ Python.
**–ò—Ç–æ–≥:** +40% –∫ —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ–±—É—á–µ–Ω–∏—è –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º PyTorch.

### 3. Native GGUF Pipeline
–í–∞–º –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ –º—É—á–∏—Ç—å—Å—è —Å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–µ–π. –°—Ç—É–¥–∏—è –≤–∫–ª—é—á–∞–µ—Ç —Å–∏—Å—Ç–µ–º—É **Hot Patching**:
*   –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∏–≤–∞–µ—Ç –∏ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç —Å–∫—Ä–∏–ø—Ç—ã `llama.cpp`.
*   –û—Ç–∫–ª—é—á–∞–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö —Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤.
*   –ù–∞ –≤—ã—Ö–æ–¥–µ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ "—á–∏—Å—Ç—ã–π" `.gguf` —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ.

### 4. Rust Data Engine
*   **Zero-Copy Loading:** –ú–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ —á—Ç–µ–Ω–∏–µ –¥–∞—Ç–∞—Å–µ—Ç–æ–≤ –ª—é–±–æ–≥–æ –æ–±—ä–µ–º–∞ —á–µ—Ä–µ–∑ `mmap` –±–µ–∑ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ RAM.
*   **Smart Bucketing:** Rust-—Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –º–∏–Ω–∏–º–∏–∑–∏—Ä—É–µ—Ç –ø–∞–¥–¥–∏–Ω–≥ (–ø—É—Å—Ç–æ—Ç—ã), –∑–∞—Å—Ç–∞–≤–ª—è—è GPU —Å—á–∏—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ–ª–µ–∑–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã.

---

## üõ† –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
*   **Environment:** Conda (Python 3.10) ‚Äî **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ** (–¥–ª—è torch.compile).
*   **GPU:** NVIDIA (6GB+ VRAM) —Å –¥—Ä–∞–π–≤–µ—Ä–∞–º–∏ CUDA.
*   **System:** Linux / WSL2 (Windows).
*   **Compiler:** Rust (Cargo) ‚Äî –¥–ª—è —Å–±–æ—Ä–∫–∏ —è–¥—Ä–∞.

### –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ

**1. –°–æ–∑–¥–∞–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (Conda)**
```bash
conda create -n bulba python=3.10
conda activate bulba
```

**2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è**
```bash
git clone https://github.com/yourname/bulbagpt-studio.git
cd bulbagpt-studio
```

**3. –°–±–æ—Ä–∫–∞ —è–¥—Ä–∞ (Rust)**
–≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —à–∞–≥. Python –¥–æ–ª–∂–µ–Ω –Ω–∞—É—á–∏—Ç—å—Å—è "–≥–æ–≤–æ—Ä–∏—Ç—å" —Å Rust —á–µ—Ä–µ–∑ FFI.
```bash
pip install maturin
cd bulba_rust
maturin develop --release
cd ..
```

**4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π Python**
```bash
pip install -r requirements.txt
```

---

## üöÄ Workflow (–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç)

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å—Ç—É–¥–∏—é: `python main.py`

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö (Data Prep)
*   –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∞—à–∏ —Ç–µ–∫—Å—Ç—ã (`.txt`, `.json`, `.md`) ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Å–º–µ—à–∞–Ω–Ω—ã–π –∫–æ—Ä–ø—É—Å (Code + RU + BY + EN).
*   –ù–∞–∂–º–∏—Ç–µ **"Prepare Data"**.
*   Rust-–¥–≤–∏–∂–æ–∫ –æ–±—É—á–∏—Ç **BPE-—Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä** —Å —É—á–µ—Ç–æ–º –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–æ–π –º–æ—Ä—Ñ–æ–ª–æ–≥–∏–∏ –∏ —Å–æ–∑–¥–∞—Å—Ç –±–∏–Ω–∞—Ä–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç `train.bin`.

### 2. –û–±—É—á–µ–Ω–∏–µ (Training)
*   –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ—Å–µ—Ç:
    *   **Krolik (50M):** –î–ª—è –±—ã—Å—Ç—Ä—ã—Ö —Ç–µ—Å—Ç–æ–≤.
    *   **AIst (150M):** –ó–æ–ª–æ—Ç–æ–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç (Llama-3 structure).
    *   **Zubr (350M):** "–£–º–Ω–∞—è" –º–æ–¥–µ–ª—å –¥–ª—è —á–∞—Ç–∞.
*   **–†–µ–∂–∏–º:** –í—ã–±–µ—Ä–∏—Ç–µ **"Both"** –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —É—Ç–∏–ª–∏–∑–∞—Ü–∏–∏ GPU.
*   –ù–∞–∂–º–∏—Ç–µ **"START TRAINING"**.

### 3. –≠–∫—Å–ø–æ—Ä—Ç (Deploy)
*   –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤–æ –≤–∫–ª–∞–¥–∫—É **Auto-Export**.
*   –í—ã–±–µ—Ä–∏—Ç–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π —á–µ–∫–ø–æ–∏–Ω—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, `final.safetensors`).
*   –ù–∞–∂–º–∏—Ç–µ **"Convert to GGUF"**.
*   –°—Ç—É–¥–∏—è —Å–∞–º–∞ –ø—Ä–æ–ø–∞—Ç—á–∏—Ç –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä –∏ –≤—ã–¥–∞—Å—Ç –≥–æ—Ç–æ–≤—ã–π —Ñ–∞–π–ª –≤ –ø–∞–ø–∫–µ `output_models`, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ —Å—Ä–∞–∑—É –æ—Ç–∫—Ä—ã—Ç—å –≤ **LM Studio**.

---

## üìä –ë–µ–Ω—á–º–∞—Ä–∫–∏ (RTX 3060 12GB)

| –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è | –°–∫–æ—Ä–æ—Å—Ç—å (tok/s) | VRAM (ctx=1024) | RAM (Host) |
| :--- | :--- | :--- | :--- |
| HF Trainer (Standard) | 14,500 | 11.2 GB | 12 GB+ |
| **BulbaGPT (Mode: Both)** | **26,200** | **8.1 GB** | **0.2 GB** |

*–ó–∞ —Å—á–µ—Ç mmap –∏ GQA –º—ã –æ–±—É—á–∞–µ–º –º–æ–¥–µ–ª–∏ –±—ã—Å—Ç—Ä–µ–µ –∏ –Ω–∞ –±–æ–ª–µ–µ –¥–µ—à–µ–≤–æ–º –∂–µ–ª–µ–∑–µ, —á–µ–º –ø–æ–∑–≤–æ–ª—è—é—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏.*

---

License: MIT  
**BulbaGPT Project** üáßüáæ ‚Äî Science meets Open Source.